import{r as n,u as w,a as j,j as e,S as g}from"./index-CbY1mSqF.js";const v=a=>{const s=()=>{const t=+new Date(a)-+new Date;return t>0?{hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60),total:t}:{hours:0,minutes:0,seconds:0,total:0}},[d,c]=n.useState(s()),[i,x]=n.useState(!1);return n.useEffect(()=>{const t=setInterval(()=>{const r=s();c(r),r.total<=0&&(x(!0),clearInterval(t))},1e3);return()=>clearInterval(t)},[a]),{timeLeft:d,isExpired:i,formattedTime:(()=>{const t=r=>r.toString().padStart(2,"0");return`${t(d.hours)}:${t(d.minutes)}:${t(d.seconds)}`})()}},S=()=>{const{user:a,activeQuestion:s,submitAnswer:d}=w(),c=j(),{isExpired:i,formattedTime:x}=v((s==null?void 0:s.endTime)||new Date),[l,t]=n.useState(""),[r,o]=n.useState("loading"),[f,h]=n.useState(""),[p,b]=n.useState(!1);n.useEffect(()=>{a||c("/name")},[a,c]),n.useEffect(()=>{if(!s){o("no-active");return}(()=>{const m=g.hasUserAnswered(s.id,a);b(m),o(m?"submitted":"active")})()},[s,a]);const y=u=>{if(u.preventDefault(),!!l.trim()){if(i){o("error"),h("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„.");return}o("submitting");try{g.submit({user:a,question:s,answer:l}),o("submitted"),b(!0),h("ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­! Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚.")}catch(m){o("error"),h(m.message),m.message.includes("Ù…Ø³Ø¨Ù‚Ø§Ù‹")?setTimeout(()=>{o("submitted"),b(!0)},1500):setTimeout(()=>o("active"),2e3)}}};return s?e.jsx("div",{className:"w-full max-w-2xl animate-slide-up text-right",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-primary/5 overflow-hidden border border-primary/10",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-dark p-8 text-white text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('/islamic-pattern.png')] mix-blend-overlay"}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-1 rounded-full mb-4 text-sm font-bold tracking-wider ${i?"bg-red-500/20 text-red-100":"bg-white/20 text-yellow-300"}`,children:[e.jsx("span",{children:i?"Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª":"Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),e.jsx("span",{className:"font-mono text-lg",dir:"ltr",children:i?"00:00:00":x})]}),e.jsx("h3",{className:"text-lg font-medium opacity-90 relative z-10 text-primary-light mb-2",children:"Ø³Ø¤Ø§Ù„ Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("h1",{className:"text-2xl md:text-4xl font-bold leading-relaxed relative z-10 drop-shadow-md",children:s.text})]}),e.jsx("div",{className:"p-8",children:p?e.jsxs("div",{className:"text-center animate-fade-in py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:["Ø´ÙƒØ±Ø§Ù‹ ",a,"!"]}),e.jsx("p",{className:"text-gray-600",children:"ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¬Ø§Ø¨ØªÙƒ. Ø³ÙŠØªÙ… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù† Ø§Ù„ÙØ§Ø¦Ø² Ù‚Ø±ÙŠØ¨Ø§Ù‹."})]}):e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-primary-dark font-bold text-lg mb-4",children:"Ø¥Ø¬Ø§Ø¨ØªÙƒ:"}),e.jsx("textarea",{className:"w-full p-5 rounded-2xl border-2 border-gray-100 bg-gray-50 focus:bg-white focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all duration-300 text-lg resize-none shadow-inner",rows:"4",placeholder:"Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§...",value:l,onChange:u=>t(u.target.value),disabled:r==="submitting"})]}),r==="error"&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-xl text-sm font-medium border border-red-100 flex items-center gap-2",children:["ğŸš« ",f]}),e.jsx("button",{type:"submit",disabled:r==="submitting"||!l.trim()||i,className:`w-full py-5 text-xl font-bold rounded-2xl transition-all duration-200 shadow-md 
                                ${r==="submitting"||!l.trim()||i?"bg-gray-200 text-gray-400 cursor-not-allowed shadow-none":"bg-[#14532D] hover:bg-[#0F3D2E] text-white hover:-translate-y-1 hover:shadow-lg"}`,children:i?"Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª":r==="submitting"?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª Ù…ØºÙ„Ù‚Ø©: ",new Date(s.endTime).toLocaleTimeString("ar-SA")]}),e.jsx("span",{children:"Ø­Ø¸Ø§Ù‹ Ù…ÙˆÙÙ‚Ø§Ù‹!"})]})]})}):e.jsxs("div",{className:"text-center p-12 bg-white rounded-3xl shadow-sm border border-primary/5 animate-fade-in my-12 backdrop-blur-sm",children:[e.jsx("div",{className:"mb-6 opacity-80",children:e.jsx("img",{src:"/dal-logo.png",alt:"Logo",className:"h-20 mx-auto grayscale opacity-50"})}),e.jsx("h2",{className:"text-3xl font-bold text-primary-dark mb-4 tracking-tight",children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¤Ø§Ù„ Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("p",{className:"text-lg text-primary/70 font-medium",children:"ØªØ±Ù‚Ø¨ÙˆØ§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù… ÙÙŠ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù†Ø© Ù„Ù„ÙÙˆØ§Ø²ÙŠØ±."})]})};export{S as default};
