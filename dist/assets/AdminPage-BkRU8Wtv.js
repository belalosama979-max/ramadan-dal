import{r as s,S as C,j as e,Q as f}from"./index-CbY1mSqF.js";const F=l=>{if(!l||l.length===0)return null;const c=l.filter(r=>r.isCorrect);return c.length===0?null:(c.sort((r,a)=>new Date(r.submittedAt)-new Date(a.submittedAt)),c[0])},T=l=>l?new Date(l).toLocaleString("ar-SA"):"",E=()=>{const l=["#D4AF37","#14532D","#22C55E","#FCD34D","#FFFFFF"];for(let r=0;r<100;r++){const a=document.createElement("div");a.classList.add("confetti");const i=l[Math.floor(Math.random()*l.length)],x=Math.random()*100+"vw",n=Math.random()*2+2+"s",o=Math.random()*.5+"s";a.style.backgroundColor=i,a.style.left=x,a.style.animationDuration=n,a.style.animationDelay=o,document.body.appendChild(a),setTimeout(()=>{a.remove()},4e3)}},I=()=>{const[l,c]=s.useState([]),[r,a]=s.useState(null),[i,x]=s.useState([]),[n,o]=s.useState({text:"",correctAnswer:"",startTime:"",endTime:""}),[w,b]=s.useState(!1),[g,N]=s.useState(""),[y,j]=s.useState("");s.useEffect(()=>{sessionStorage.getItem("dal_admin_auth")==="true"&&b(!0)},[]);const v=t=>{t.preventDefault(),g==="dal123"?(b(!0),sessionStorage.setItem("dal_admin_auth","true"),j("")):j("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©")},p=()=>{const t=f.getAll();c(t);const m=f.getActive(t);m?a(m.id):t.length>0&&!r&&a(t[0].id)};s.useEffect(()=>{p()},[]),s.useEffect(()=>{if(r){const t=C.getByQuestionId(r);x(t)}else x([])},[r]);const D=t=>{t.preventDefault();try{f.add(n),o({text:"",correctAnswer:"",startTime:"",endTime:""}),p(),alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­")}catch(m){alert(m.message)}},u=l.find(t=>t.id===r),S=i.length,[A,k]=s.useState(new Date);s.useEffect(()=>{const t=setInterval(()=>k(new Date),1e3);return()=>clearInterval(t)},[]);const h=u?new Date(u.endTime)>A:!1,d=s.useMemo(()=>!u||h?null:F(i),[i,u,h]);return s.useEffect(()=>{d&&E()},[d]),w?e.jsxs("div",{className:"w-full max-w-7xl animate-fade-in pb-16 px-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-primary/10 pb-6 mb-10",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary-dark",children:"Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsx("button",{onClick:()=>{b(!1),sessionStorage.removeItem("dal_admin_auth")},className:"text-red-500 hover:text-red-700 font-medium text-sm bg-red-50 px-4 py-2 rounded-lg hover:bg-red-100 transition",children:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl shadow-primary/5 border border-primary/10 h-fit sticky top-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-primary-dark mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl",children:"+"}),"Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„"]}),e.jsxs("form",{onSubmit:D,className:"space-y-5",children:[e.jsx("textarea",{placeholder:"Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„",className:"w-full p-4 rounded-xl border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-medium",value:n.text,onChange:t=>o({...n,text:t.target.value}),required:!0}),e.jsx("input",{type:"text",placeholder:"Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©",className:"w-full p-4 rounded-xl border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-medium",value:n.correctAnswer,onChange:t=>o({...n,correctAnswer:t.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡"}),e.jsx("input",{type:"datetime-local",className:"w-full p-3 rounded-xl border-2 border-gray-100 focus:border-primary transition-colors text-sm",value:n.startTime,onChange:t=>o({...n,startTime:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"}),e.jsx("input",{type:"datetime-local",className:"w-full p-3 rounded-xl border-2 border-gray-100 focus:border-primary transition-colors text-sm",value:n.endTime,onChange:t=>o({...n,endTime:t.target.value}),required:!0})]})]}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-[#14532D] hover:bg-[#0F3D2E] text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-primary/20 hover:-translate-y-0.5",children:"Ø­ÙØ¸ Ø§Ù„Ø³Ø¤Ø§Ù„"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-primary/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø®ØªØ§Ø±:"}),e.jsx("select",{className:"p-2 border rounded-lg bg-gray-50 max-w-xs",value:r||"",onChange:t=>a(t.target.value),children:l.map(t=>e.jsxs("option",{value:t.id,children:[t.text.substring(0,50),"..."]},t.id))})]}),e.jsx("button",{onClick:p,className:"text-primary hover:text-primary-dark font-medium text-sm underline",children:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âŸ³"})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-3xl border border-blue-100 text-center",children:[e.jsx("h4",{className:"text-blue-800 font-bold mb-2",children:"Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†"}),e.jsx("p",{className:"text-4xl font-extrabold text-blue-600",children:S})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl border border-green-100 text-center",children:[e.jsx("h4",{className:"text-green-800 font-bold mb-2",children:"Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©"}),e.jsx("p",{className:"text-4xl font-extrabold text-green-600",children:i.filter(t=>t.isCorrect).length})]}),e.jsxs("div",{className:`p-8 rounded-3xl border-2 text-center transition-all duration-500 shadow-lg ${d?"bg-gradient-to-br from-[#D4AF37] to-[#B8860B] border-[#FCD34D] text-white shadow-yellow-900/20":"bg-white border-gray-100"}`,children:[e.jsx("h4",{className:`${d?"text-white/90":"text-gray-400"} text-sm font-bold uppercase tracking-widest mb-4`,children:"ÙØ§Ø¦Ø² Ø§Ù„ÙŠÙˆÙ…"}),d?e.jsxs("div",{className:"animate-slide-up flex flex-col items-center",children:[e.jsx("div",{className:"text-5xl mb-3 drop-shadow-md filter",children:"ðŸ†"}),e.jsx("p",{className:"text-3xl font-extrabold text-white drop-shadow-sm mb-1",children:d.name}),e.jsx("div",{className:"bg-black/20 px-4 py-1 rounded-full backdrop-blur-sm mt-2",children:e.jsx("p",{className:"text-xs text-white/80 font-mono tracking-wider",children:T(d.submittedAt)})})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[100px]",children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-2xl mb-2",children:"â³"}),e.jsx("p",{className:"text-primary font-bold",children:"Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ø§ ÙŠØ²Ø§Ù„ Ù†Ø´Ø·Ø§Ù‹"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ø³ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª"})]}):e.jsx("p",{className:"text-gray-400 text-sm italic",children:"Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª..."})})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-primary/5 border border-primary/10 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right bg-white",children:[e.jsx("thead",{className:"bg-gray-50/80 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-5 text-sm font-bold text-primary-dark",children:"Ø§Ù„Ø§Ø³Ù…"}),e.jsx("th",{className:"p-5 text-sm font-bold text-primary-dark",children:"Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"}),e.jsx("th",{className:"p-5 text-sm font-bold text-primary-dark",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-5 text-sm font-bold text-primary-dark",children:"Ø§Ù„ØªÙˆÙ‚ÙŠØª"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-12 text-center text-gray-400 font-medium",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙƒØ§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„"})}):i.sort((t,m)=>new Date(t.submittedAt)-new Date(m.submittedAt)).map(t=>e.jsxs("tr",{className:`hover:bg-gray-50/80 transition-colors ${d&&d.id===t.id?"bg-amber-50/60":""}`,children:[e.jsxs("td",{className:"p-5 font-bold text-gray-800",children:[t.name,d&&d.id===t.id&&e.jsx("span",{className:"mr-3 text-xs bg-accent text-white px-2.5 py-1 rounded-full shadow-sm",children:"ðŸ‘‘ ÙØ§Ø¦Ø²"})]}),e.jsx("td",{className:"p-5 text-gray-600 font-medium",children:t.answer}),e.jsx("td",{className:"p-5",children:h?e.jsx("span",{className:"text-gray-400 bg-gray-100 border border-gray-200 px-3 py-1 rounded-full text-xs font-bold",children:"Ù…Ø®ÙÙŠ ðŸ”’"}):t.isCorrect?e.jsx("span",{className:"text-green-700 bg-green-50 border border-green-100 px-3 py-1 rounded-full text-xs font-bold",children:"ØµØ­ÙŠØ­Ø© âœ…"}):e.jsx("span",{className:"text-red-700 bg-red-50 border border-red-100 px-3 py-1 rounded-full text-xs font-bold",children:"Ø®Ø§Ø·Ø¦Ø© âŒ"})}),e.jsx("td",{className:"p-5 text-gray-400 text-sm font-mono",dir:"ltr",children:new Date(t.submittedAt).toLocaleTimeString("en-US")})]},t.id))})]})})})]})]})]}):e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center animate-fade-in p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl shadow-primary/5 border border-primary/10 w-full max-w-md text-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl",children:"ðŸ”’"}),e.jsx("h2",{className:"text-2xl font-bold text-primary-dark mb-2",children:"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"}),e.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:"ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©"}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{type:"password",placeholder:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",className:"w-full p-4 rounded-xl border-2 border-gray-100 focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all text-center text-lg",value:g,onChange:t=>N(t.target.value),autoFocus:!0}),y&&e.jsx("p",{className:"text-red-500 text-sm font-bold bg-red-50 py-2 rounded-lg",children:y}),e.jsx("button",{type:"submit",className:"w-full py-4 bg-primary hover:bg-primary-dark text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-primary/20",children:"Ø¯Ø®ÙˆÙ„"})]})]})})};export{I as default};
